function openData(a,b,d){var c=b+"_bdme",c='<div id="'+c+'" class="actbox">'+('<button style="float:right; font-size:xx-small" title="Close data box." onclick="removeMe(\''+c+"')\"> [X] </button><br />"),e="chart"+a.uniq+"_"+Math.floor(100*Math.random()+1),g=d;"table"==g&&(g="tsv");g||(g="json");var f='<button title="Download now!"><a href="'+a.root+"tmp/"+e+"."+g+'">'+('<img src="'+a.root+'icons/disk.gif" />')+"</a></button>",k=a.root+"downloadfile.php",h=a.data;if("tsv"==d){a=[];d=[];for(i=0;i<
h.length;i++)a.push(h[i].label),d.push(h[i].value);c+=printArr(a)+" <br />"+printArr(d)+"<br />"}else if("table"==d){a=[];d=[];for(i=0;i<h.length;i++)a.push(h[i].label),d.push(h[i].value);c+='<span class="exporttitle">Excel table</span><table class="exportexcel"><thead class="exportheading">'+printArr(a,1)+"</thead><tbody>"+printArr(d,1)+"</tbody></table>";c+='<span class="exportsave"><br />OPEN data to Excel (/etc) or save it: '+f+"</span>";f=printArr(a)+"\t\n"+printArr(d);$.post(k,{fname:e,svg:f,
type:"tsv"}).done(function(){})}else"svg"==d?(h=document.getElementById(b).innerHTML,c+='<span class="exportsave">OPEN the chart to your SVG editor/browser or save it: '+f+"</span>",a.cssfile="",$.post(k,{fname:e,svg:h,type:"svg",cssfile:a.cssfile}).done(function(){})):(h=' "points":'+JSON.stringify(h),a.ytitle&&(h='"ytitle":"'+a.ytitle+'", '+h),a.xtitle&&(h='"xtitle":"'+a.xtitle+'", '+h),a.title&&(h='"title":"'+a.title+'", '+h),h="data = { "+h+" }",c+='<div class="exportjson">'+h.replace(/, /g,", <br />").replace(/},/g,
"},<br />")+"</div>",c+='<span class="exportsave"><br />OPEN or SAVE the big data (JSON): '+f+"</span>",$.post(k,{fname:e,svg:h,type:g}).done(function(){}));c+="</div>";$("#"+b).append(c)}function removeMe(a){$("#"+a).remove()}function printArr(a,b){return b?JSON.stringify(a).replace(/,/g,"</td><td>").replace("[","<tr><td>").replace("]","</td></tr>").replace(/"/g,"").replace(/\./g,","):JSON.stringify(a).replace(/,/g,"\t").replace("[","").replace("]","").replace(/"/g,"")}
function pickRow(a,b,d){"first"==a&&(a=1);"last"==a&&(a=b.length);a>b.length&&(a=b.length);d||(d="");var c=[];a--;var e=!1,g;for(g in b[a])if(e){var f={};f.label=g;b[a][g]=b[a][g].replace(",",".");f.value=b[a][g];c.push(f)}else e=!0,f=' <span style="color:gray">['+b[a][g]+"]</span>",$("#databutt"+d).append(f);return c}function pickColumn(a,b){console.info(b[b.length-1]);return b}function cbaSort(a,b){return a.value<b.value}function abcSort(a,b){return a.value>b.value}
function labelSort(a,b){return a.label>b.label}
function newChart(a){if(0==a.data.length){var b=a.datafile;b?(0<b.indexOf("tsv")&&d3.tsv(b,function(b,c){a.data=c;drawChart(a);ok(b)}),0<b.indexOf("csv")&&d3.csv(b,function(b,c){a.data=c;drawChart(a);ok(b)}),0<b.indexOf("json")&&d3.json(b,function(b,c){a.data=c;drawChart(a);ok(b)}),0<b.indexOf("xml")&&d3.xml(b,function(a,b){})):console.error("Not found any data input for chart from file or shortcode direct call !")}else drawChart(a),$("#databutt"+a.uniq).empty(),$("#databutt"+a.uniq).attr("title",
"")}function ok(a){a&&console.info(a)}function transpose(a){var b=d3.csv.parseRows(d3.csv.format(a.backup)),b=d3.csv.parse(d3.csv.format(d3.transpose(b)));a.backup=b}function dataZoom(a,b,d,c){a.sort="";transpose(a);extendData(a,b,d,c);a.xtitle="";initDraw(b)}function labelChart(a,b){var d=$("#table"+b+" .xdata :selected").text();if(d){var c=$("#title"+b).text();$("#title"+b).empty();$("#title"+b).text(c+": "+d)}}function filterPs(a,b){return b<a.length?a.slice(a.length-b):a}
function drawChart(a,b,d,c){c&&(a.row=c);d&&(a.column=d);a.datafile&&a.row?(a.backup=a.data,a.data=pickRow(a.row,a.data,a.uniq),a.row=0,a.maxseries&&(a.backup=filterPs(a.backup,a.maxseries))):a.datafile&&a.column&&(a.backup=a.data,a.data=pickColumn(a.column,a.data),a.column=0);if(a.sort||a.sortinit){for(i=0;i<a.data.length;i++)"string"==typeof a.data[i].value&&(a.data[i].value=parseFloat(a.data[i].value));a.sort&&("abc"==a.sort||123==a.sort||"123"==a.sort?a.data.sort(abcSort):"cba"==a.sort||321==
a.sort||"321"==a.sort?a.data.sort(cbaSort):"label"==a.sort&&a.data.sort(labelSort))}b&&(a.chart=b);$("#chart"+a.uniq).empty();a.margin||(a.margin=Object({top:20,right:20,bottom:30,left:70}));a.tooltips||createTooltip();"columns"==a.chart?simpleCols(a):"bars"==a.chart?simpleBars(a):"area"==a.chart?simpleArea(a):"pie"==a.chart?simplePie(a):"line"==a.chart?simpleLine(a):(console.error('No legal chart type given in shortcode, choices are: "area", "columns", "bars", "line", and "pie".'),a.chart="columns",
simpleCols(a))}
function extendData(a,b,d,c){if(a.backup){b||(b=0);c||(c="");var e="";if(1<a.backup.length){var g=[],f;for(f in a.backup[0])g.push(f);for(var k=f=a.backup.length-1;-1<k;k--)e=k<f?'<option value="'+k+'">'+a.backup[k][g[0]]+"</option>"+e:'<option value="'+k+'" selected>'+a.backup[k][g[0]]+"</option>"+e;e='<select class="xdata" id="xdata'+b+'" onchange="initDraw('+b+')">'+e+"</select>";d&&(e+='<br /><div onchange="initDraw('+b+')" id="xdata'+b+'-slider"></div>');$("#table"+c+" #extras").empty();$("#table"+
c+" #extras").html(e);d&&newSlider("xdata"+b)}else alert("Only one data set is given as an input at the moment.")}else alert("There is no other data sets given to select for this chart.")}function initDraw(a){var b=$("#xdata"+a).val();a=d3charts[a];a.data=a.backup;drawChart(a,a.chart,0,parseInt(b)+1)}function sort(a){a||(a="0");var b=$("#xsort"+a).val();b||(b="label");d3charts[a].sort=b;drawChart(d3charts[a],d3charts[a].chart)}
function xrotate(a,b){b.xrotate&&a.selectAll(".x .tick text").attr("transform","rotate("+b.xrotate+")").attr("dy",14)}
function simpleCols(a){var b=a.data,d=a.width,c=a.height;a.margin||(d=a.width-a.margin.left-a.margin.right,c=a.height-a.margin.top-a.margin.bottom);var e=d3.format(a.format),g=d3.scale.ordinal().rangeRoundBands([0,d],0.2),f=0,k=d3.min(b,function(a){return a.value});k<f&&(f=k-2);a.minrange&&(f=a.minrange);var h=d3.scale.linear(),k=d3.svg.axis().scale(g).orient("bottom"),e=d3.svg.axis().scale(h).orient("left").tickFormat(e),n=0;a.caption&&(n=50);var l=parseInt(d)+a.margin.left+a.margin.right,n=parseInt(c)+
a.margin.top+a.margin.bottom+n,m="g"+a.uniq;d3.select("#chart"+a.uniq+" svg").remove(this);l=d3.select("#chart"+a.uniq).append("svg").attr("width",l).attr("height",n).append("g").attr("class",m).attr("transform","translate("+a.margin.left+","+a.margin.top+")");b.forEach(function(a){a.value=+a.value});n=d3.max(b,function(a){return a.value})+1;a.maxrange&&(n=a.maxrange);g.domain(b.map(function(a){return a.label}));h.domain([n,f]).range([0,c]).nice();l.append("g").attr("class","x axis").attr("transform",
"translate(0,"+c+")").call(k).append("text").attr("x",Math.round(d/2)).attr("dy",40).attr("class","xtitle axis").style("text-anchor","end").text(a.xtitle);xrotate(l,a);l.append("g").attr("class","y axis").call(e).append("text").attr("transform","rotate(-90)").attr("y",Math.round(c/2)).attr("y",-40).attr("class","ytitle axis").style("text-anchor","end").text(a.ytitle);l.selectAll(".bar").data(b).enter().append("rect").attr("class","bar").attr("x",function(a){return g(a.label)}).attr("width",g.rangeBand()).attr("y",
function(a){return h(a.value)}).attr("height",function(a){return c-h(a.value)});a.colors=getColorRamp(a.startbar,a.data.length,a.endbar);if(a.colors)if(!a.gradient)l.selectAll(".bar").style("fill",function(b,c){return a.colors[c]});else if("value"==a.gradient||"vertical"==a.gradient)a.dataorder=weights(a.data),l.selectAll(".bar").style("fill",function(b,c){return a.colors[a.dataorder.indexOf(b.value)]});placeTitle(l,20,0,a.title,a.uniq);labelChart(a.row,a.uniq);placeCaption(l,0,c,a.caption);checkTicks(a,
c,d,h,"horizontal",l);a.tooltips||addTooltips()}
function simpleBars(a){var b=a.data,d=a.width,c=a.height;a.margin||(d=a.width-a.margin.left-a.margin.right,c=a.height-a.margin.top-a.margin.bottom);var e=!0,g=[],f;for(f in b)b[f].value&&(g.push(b[f].value),0>b[f].value&&(e=!1));f=a.margin;var d=d-f.left-f.right,c=c-f.top-f.bottom,k=Math.max(-d3.min(g),d3.max(g));a.maxrange&&(k=a.maxrange);k=parseFloat(k);min=0;a.minrange&&(min=a.minrange);var h=d3.scale.linear().domain([min,k]).range([0,d]).nice();e&&(h=d3.scale.linear().domain([min,k]).range([0,
d]).nice());var c=1.5*c,n=d3.scale.ordinal().domain(d3.range(g.length)).rangeRoundBands([0,c],0.2),e=d3.svg.axis().scale(h).orient("bottom"),k=d3.svg.axis().scale(n).orient("left");(formatPercent=d3.format(a.format))&&e.tickFormat(formatPercent);var l=0;a.caption&&(l=50);var m="g"+a.uniq;d3.select("#chart"+a.uniq+" svg").remove(this);f=d3.select("#chart"+a.uniq).append("svg").attr("width",d+f.left+f.right).attr("height",c+f.top+f.bottom+l).append("g").attr("class",m).attr("transform","translate( 0 ,"+
f.top+")");var p=-1;f.selectAll(".bar").data(g).enter().append("text").attr("class","tick major").attr("x",d).attr("y",function(a,b){return 10+parseInt(n(b))}).text(function(a){p++;return b[p].label});f.selectAll(".bar").data(g).enter().append("rect").attr("class",function(a){return 0>a?"bar negative":"bar positive"}).attr("x",function(a){return h(Math.min(min,a))}).attr("y",function(a,b){return n(b)}).attr("width",function(a){return Math.abs(h(a)-h(min))}).attr("height",n.rangeBand()+6);a.colors=
getColorRamp(a.startbar,a.data.length,a.endbar);if(a.colors)if(!a.gradient)f.selectAll(".bar").style("fill",function(b,c){return a.colors[c]});else if("value"==a.gradient||"vertical"==a.gradient)a.dataorder=weights(a.data),f.selectAll(".bar").style("fill",function(b,c){return a.colors[a.dataorder.indexOf(b)]});n.domain(b.map(function(a){return a.label}));f.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(e).append("text").attr("x",d).attr("y",40).attr("class","ytitle axis").style("text-anchor",
"end").text(a.ytitle);xrotate(f,a);f.append("g").attr("class","y axis").append("line").attr("x1",h(min)).attr("x2",h(min)).attr("y1",min).attr("y2",c).call(k).append("text").attr("transform","rotate(-90)").attr("y",Math.round(c/2)).attr("x",-40).attr("class","xtitle axis").style("text-anchor","end").text(a.xtitle);placeTitle(f,20,0,a.title,a.uniq);labelChart(a.row,a.uniq);placeCaption(f,0,c,a.caption);checkTicks(a,c,d,h,"vertical",f);a.tooltips||(f.selectAll(".bar").data(b),addTooltips())}
function simpleArea(a){var b=a.data,d=a.width,c=a.height;a.margin||(d=a.width-a.margin.left-a.margin.right,c=a.height-a.margin.top-a.margin.bottom);var e=a.margin;b.forEach(function(a){a.value=+a.value});var g=d3.scale.ordinal().domain(d3.range(b.length)).rangeRoundBands([0,d]),f=d3.min(b,function(a){return a.value})-2;0<f&&(f=0);a.minrange&&(f=a.minrange);var k=d3.max(b,function(a){return a.value});a.maxrange&&(k=a.maxrange);var h=d3.scale.linear().domain([f,k]).range([parseInt(c),0]),f=d3.svg.axis().scale(g).orient("bottom"),
k=d3.svg.axis().scale(h).orient("left");(formatPercent=d3.format(a.format))&&k.tickFormat(formatPercent);var n=d3.svg.area().x(function(a){return g(a.label)}).y0(parseInt(c)).y1(function(a){return h(a.value)});g.domain([]);g.domain(b.map(function(a){return a.label}));d3.svg.line().x(function(a,b){return g(b)}).y(function(a){return h(a.value)});var l=0;a.caption&&(l=50);var m="g"+a.uniq;d3.select("#chart"+a.uniq+" svg").remove(this);e=d3.select("#chart"+a.uniq).append("svg").attr("width",parseInt(d)+
e.left+e.right).attr("height",parseInt(c)+e.top+e.bottom+l).append("g").attr("class",m).attr("transform","translate("+e.left+","+e.top+")");b.forEach(function(a){a.value=+a.value});l="";if(a.startbar||a.endbar){m="navy";a.startbar&&(m=a.startbar);var p="blue";a.endbar&&(p=a.endbar);var l="pgrad"+a.uniq,q="100%",r="0%";!a.gradient||"value"!=a.gradient&&"vertical"!=a.gradient||(q="0%",r="100%");e.append("defs").append("linearGradient").attr("id",l).attr("x1","0%").attr("y1",r).attr("x2",q).attr("y2",
"0%").append("stop").attr("offset","0%").attr("style","stop-opacity:1; stop-color:"+m);d3.select("#"+l).append("stop").attr("offset","100%").attr("style","stop-opacity:1; stop-color:"+p);m=""}else m="areabar";e.append("path").datum(b).attr("class",m).attr("fill","url(#"+l+")").attr("transform","translate("+d/b.length/2+", 0 )").attr("d",n);e.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(f).append("text").attr("x",Math.round(parseInt(d)/2)).attr("y",40).attr("class",
"xtitle axis").style("text-anchor","end").text(a.xtitle);xrotate(e,a);e.append("g").attr("class","y axis").call(k).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("class","ytitle axis").style("text-anchor","end").text(a.ytitle);placeTitle(e,20,0,a.title,a.uniq);labelChart(a.row,a.uniq);placeCaption(e,0,c,a.caption);checkTicks(a,c,d,h,"horizontal",e)}
function simplePie(a){var b=a.data,d=a.width,c=a.height;a.margin||(d=a.width-a.margin.left-a.margin.right,c=a.height-a.margin.top-a.margin.bottom);var d=Math.max(d,c)/2.5,e=d3.svg.arc().outerRadius(d-40).innerRadius(0),g=d3.layout.pie().sort(null).value(function(a){return a.value}),f=0;a.caption&&(f=50);var k="g"+a.uniq;d3.select("#chart"+a.uniq+" svg").remove(this);var f=d3.select("#chart"+a.uniq).append("svg").attr("width",2*d).attr("height",2*d+f).append("g").attr("class",k).attr("transform","translate("+
d+","+d+")"),h=!1,k=[];for(i=0;i<b.length;i++)0<b[i].value?k.push(b[i]):h=!0;b=k;b.forEach(function(a){0<a.value?a.value=+a.value:h=!0});var n=d3.scale.ordinal().range(a.colors),b=f.selectAll(".arc").data(g(b)).enter().append("g").attr("class","bar areabar");a.colors=getColorRamp(a.startbar,a.data.length,a.endbar);b.append("path").attr("d",e).style("fill",function(a){return n(a.data.label)});b.append("text").attr("transform",function(a){return"translate("+e.centroid(a)+")"}).attr("dy",".35em").attr("class",
"pietext").style("text-anchor","middle").text(function(a){return a.data.label});placeTitle(f,-d+20,-d+20,a.title,a.uniq);labelChart(a.row,a.uniq);placeCaption(f,-d,c,a.caption);h?$("#chart"+a.uniq).append('<div class="datawarning"><b>Warning</b>: some negative data points were removed from  input data set.</div>'):a.tooltips||addTooltips()}
function simpleLine(a){var b=a.data,d=a.width,c=a.height;a.margin||(d=a.width-a.margin.left-a.margin.right,c=a.height-a.margin.top-a.margin.bottom);var e=a.margin,g=0;b.forEach(function(a){a.value=+a.value;0>a.value&&(g=a.value)});a.minrange&&(g=a.minrange);var f=parseInt(d3.max(b).value);0<a.maxrange&&(f=a.maxrange);var k=d3.scale.ordinal().rangeRoundBands([0,d]),h=d3.scale.linear().domain([g,f]).range([c,0]).nice(),f=d3.svg.axis().scale(k).orient("bottom"),n=d3.svg.axis().scale(h).orient("left");
(formatPercent=d3.format(a.format))&&n.tickFormat(formatPercent);var l=d3.svg.line().x(function(a){return k(a.label)}).y(function(a){return h(a.value)}),m=0;a.caption&&(m=50);var p="g"+a.uniq;d3.select("#chart"+a.uniq+" svg").remove(this);m=d3.select("#chart"+a.uniq).append("svg").attr("width",parseInt(d)+e.left+e.right).attr("height",parseInt(c)+e.top+e.bottom+m).append("g").attr("class",p).attr("transform","translate("+e.left+","+e.top+")");k.domain(b.map(function(a){return a.label}));m.append("g").attr("class",
"x axis").attr("transform","translate(0,"+c+")").call(f).append("text").attr("x",Math.round(d/2)).attr("dy",40).attr("class","xtitle axis").style("text-anchor","end").text(a.xtitle);xrotate(m,a);m.append("g").attr("class","y axis").call(n).append("text").attr("transform","rotate(-90)").attr("y",-50).attr("dy",".71em").attr("class","ytitle axis").style("text-anchor","end").text(a.ytitle);m.append("path").datum(b).attr("class","line").attr("d",l).attr("transform","translate("+(d-e.left-e.right)/(b.length+
1)+",0)");placeTitle(m,20,0,a.title,a.uniq);labelChart(a.row,a.uniq);placeCaption(m,0,c,a.caption);checkTicks(a,c,d,h,"horizontal",m)}
function checkTicks(a,b,d,c,e,g){a.ticks&&(g=g?g.append("svg"):d3.select(".g"+a.uniq).append("svg"),g.attr("class","chart").attr("width",d).attr("height",b).append("g").attr("transform","translate(10,15)"),"horizontal"==e?g.selectAll("line").data(c.ticks(a.ticks)).enter().append("line").attr("x1",-10).attr("x2",d).attr("y1",c).attr("y2",c):g.selectAll("line").data(c.ticks(a.ticks)).enter().append("line").attr("y1",-10).attr("y2",d).attr("x1",c).attr("x2",c))}
function placeTitle(a,b,d,c,e){c&&a.append("text").attr("class","titletext").attr("id","title"+e).attr("transform","translate("+b+","+d+")").text(c)}function placeCaption(a,b,d,c){c&&a.append("text").attr("class","captiontext").attr("transform","translate("+(parseInt(b)+10)+","+(parseInt(d)+60)+")").text(c)}
function nvPie2(){nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).showLabels(!0).labelThreshold(0.05).donut(!0);d3.select("#chart2 svg").datum(exampleData()).transition().duration(1200).call(a);return a})}function exampleData(){return[{key:"Cumulative Return",values:[{label:"CDS / Options",value:29.765957771107},{label:"Cash",value:0},{label:"Corporate Bonds",value:32.807804682612}]}]}
function weights(a){var b=[];for(i=0;i<a.length;i++)b.push(a[i].value);b.sort(function(a,b){return a-b});return b}
function getColorRamp(a,b,d){if(a&&d){var c=[];if(!a.length)return"";var e=0;if(d){a=d3.lab(a);var g=[a.l,a.a,a.b];d=d3.lab(d);var f=[d.l,d.a,d.b];b-=1;e=(-g[0]+f[0])/b;d=(-g[1]+f[1])/b;g=(-g[2]+f[2])/b;for(i=0;i<b+1;i++)c.push(a.toString()),a=d3.lab(d3.lab(a).l+e,d3.lab(a).a+d,d3.lab(a).b+g)}else for(d=d3.hsl(a),0.5<d.l?(e=d.l/b,ssteps=d.s/b):(e=(1-d.l)/b,ssteps=(1-d.s)/b),a=d,i=0;i<b;i++)c.push(a.toString()),a=0.49<d.l?a.darker(4*e):a.brighter(4*e);return c}return[]}
function svgWin(a,b,d,c){var e=$("#chart"+a).html();d=d?'<link rel="stylesheet" href="'+c.root+d+'" type="text/css" media="all"/> ':"";"line"==c.chart&&(e='<div class="rickshaw_graph">'+e+"</div>",d+='<link rel="stylesheet" href="'+c.root+'rickshaw/rickshaw.min.css" type="text/css" /> ');d='<script src="'+c.root+"d3-simpleCharts.js\">\x3c/script><script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'>\x3c/script>"+d;b&&(b='<img src="'+b+'">');d='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <html><head><title> '+
c.title+" - Chart, "+c.chart+" </title>"+d+"</head> ";d+='<body><table class="svgtable">';b&&(d=d+'<tr><td></td><td style="float:right"> '+b+"</td></tr>");d=d+'<tr><td><p style="float:right">'+('<button style="font-size:xx-small" onClick="svgsize('+a+',-0.1)"> \u00ab </button> ')+('<button style="font-size:xx-small" onClick="svgsize('+a+',+0.1)"> \u00bb </button> ')+"</p>";d+='</td></tr><tr><td class="svgchart">';d=d+e+'<br /><br /><button style="float:right" onClick="window.print()">Print Chart</button>  </body></html> ';
d+="</td></tr></table>";a=250+parseInt(c.width);c=350+parseInt(c.height);myWindow=window.open("","","location=0,status=0,menubar=0,width="+a+",height="+c);myWindow.document.writeln(d)}
function svgsize(a,b){var d=parseInt($("svg").attr("height")),c=parseInt($("svg").attr("width"));$("svg").attr("height",d+Math.round(d*b));$("svg").attr("width",c+Math.round(c*b));var e=".g"+a,g=$(e).attr("transform"),f=Math.round(c*(1+b)/2),d=Math.round(d*(1+b)/2);console.info(c);console.info(f);f==d?(c=" translate("+f+","+d+") ",b=1+2*b,$(e).attr("transform",c+" scale("+b+") ")):(b=1+b,$(e).attr("transform",g+" scale("+b+") "));e=parseInt(window.innerWidth);c=parseInt(window.innerHeight);window.innerWidth=
Math.round(e*b);window.innerHeight=Math.round(c*b)}var tooltip,defaultOpacity=0.8,dateFormat=d3.time.format("%d-%b-%Y"),numberFormat=d3.format("n");function createTooltip(){null==tooltip&&(tooltip=d3.select("body").append("div").attr("class","iputooltip").style("opacity",0).style("width",function(){return"60px"}).html("<p>tooltip</p>").on("touchstart",hideTooltip));return tooltip}function addTooltips(){d3.selectAll(".bar").on("mouseover",showTooltip).on("mouseout",hideTooltip)}
function showTooltip(a){d3.selectAll(".bar").transition().duration(100).style("opacity",defaultOpacity);d3.selectAll(".areabar").transition().duration(100).style("opacity",defaultOpacity);d3.selectAll(".arc").transition().duration(100).style("opacity",defaultOpacity);d3.select(this).transition().duration(100).delay(50).style("opacity",1);tooltip.html(function(){if("number"==typeof a){var b=a;a={};a.value=b;a.label=""}a.data&&(a.label=a.data.label);"undefined"==typeof a.label&&(a.label="");return"<p><b>"+
a.label+"</b><br />"+a.value+"</p>"});tooltip.style("left",d3.event.pageX-70+"px").style("top",d3.event.pageY+"px").transition().duration(500).style("opacity",0.7);d3.event.stopPropagation();d3.event.preventDefault()}function moveTooltip(a){tooltip.style("left",d3.event.pageX-70+"px").style("top",d3.event.pageY+"px");d3.event.stopPropagation();d3.event.preventDefault()}
function hideTooltip(a){d3.selectAll(".bar").transition().duration(100).style("opacity",defaultOpacity);d3.selectAll(".areabar").transition().duration(100).style("opacity",defaultOpacity);d3.selectAll(".arc").transition().duration(100).style("opacity",defaultOpacity);tooltip.transition().duration(100).style("opacity",0);d3.event.stopPropagation();d3.event.preventDefault()}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}
function newSlider(a){$(function(){var b=$("#"+a),d=$("#"+a+"-slider").slider({min:1,max:b[0].length,range:"min",value:b[0].selectedIndex+1,slide:function(a,d){b[0].selectedIndex=d.value-1}});$("#"+a).change(function(){d.slider("value",this.selectedIndex+1)})})}
function simpleChart(a,b){var d=Math.floor(1E4*Math.random()+1),c={caption:"",chart:"columns"};c.chartid=d;c.colors="";c.column="";c.data=[];c.endbar="";c.format="";c.chartid="+00.02";c.height="240";c.margin=Object({bottom:30,left:70,right:20,top:20});c.maxrange=0;c.minrange=0;c.row="1";c.sort="";c.startbar="";c.ticks=10;c.title="";c.tooltips=0;c.uniq=d;c.width="320";c.xtitle="";c.ytitle="";for(var e in a)a.hasOwnProperty(e)&&"values"!=e&&"labels"!=e&&(c[e]=a[e]);for(i=0;i<a.values.length;i++)c.data.push(Object({label:a.labels[i],
value:a.values[i]}));d='<div id="'+d+'"><table class="svgtable" id="table'+d+'"><tr><td style="text-align:center" class="titletext">'+c.title+'</td></tr><tr><td><div id="chart'+d+'">'+d+"</div></td></tr></table></div>";b||document.write(d);drawChart(c)}function aDrawLink(a,b,d){return' <button style="cursor:pointer;" onclick="drawChart(d3charts['+a+"],"+b+')"> <img src="'+d+'"> </button>'}function showembed(a){a=$("#"+a).html();console.info(a)};